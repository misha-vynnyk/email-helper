# Тестування функції Hidden Sections

## Як протестувати

### 1. Підготовка тестового файлу

Скопіюйте файл `public/test-template-with-sections.html` у вашу директорію темплейтів (наприклад, `data/templates/`).

Цей файл містить:
- **Promo-content** - промо-банер (помаранчевий блок)
- **Footer-social** - соціальні мережі (синій блок)

### 2. Імпортуйте темплейт

1. Відкрийте **Template Library**
2. Натисніть **"Sync New"** або **"Import Folder"**
3. Оберіть директорію з тестовим файлом
4. Дочекайтеся імпорту

### 3. Налаштуйте приховані секції

1. Натисніть кнопку ⚙️ **Preview Settings** (праворуч вгорі)
2. Прокрутіть до секції **"Hidden Sections (Preview Only)"**
3. Додайте секції для приховування:
   - Введіть `Promo-content` → натисніть **Add**
   - Введіть `Footer-social` → натисніть **Add**
4. Натисніть **Save**

### 4. Перевірте результат

**Після збереження налаштувань:**
- Промо-банер (помаранчевий) має зникнути з preview
- Блок соціальних мереж (синій) має зникнути з preview
- Основний контент залишається видимим

**Відкрийте консоль браузера (F12):**
Ви маєте побачити лог:
```
[TemplateItem] Filtered sections: ['Promo-content', 'Footer-social']
[TemplateItem] HTML size: XXXX -> YYYY bytes
```

### 5. Перевірте, що код не змінився

1. Натисніть кнопку **"View Code"** (</> іконка)
2. У CodeMirror редакторі має бути **повний** HTML з усіма секціями
3. Натисніть **"Copy"**
4. Вставте код у текстовий редактор
5. Переконайтеся, що маркери `<!--=== Promo-content ===-->` **присутні**

### 6. Видаліть приховані секції

1. Відкрийте ⚙️ **Preview Settings**
2. Натисніть ❌ на чіпах `Promo-content` та `Footer-social`
3. Натисніть **Save**
4. Preview має показати всі секції знову

## Очікувана поведінка

### ✅ Правильно:
- Preview не показує приховані секції
- Code Dialog показує повний код
- Copy копіює повний код
- Email Send відправляє повний код
- Load в редактор завантажує повний код

### ❌ Неправильно (якщо це відбувається):
- Preview показує приховані секції після збереження
  - **Рішення:** Перевірте формат маркерів у HTML
  - **Рішення:** Подивіться в консоль браузера на логи
- Code Dialog показує відфільтрований код
  - **Помилка:** Фільтрація застосована не там, де треба
- Після видалення секцій з налаштувань preview не оновлюється
  - **Рішення:** Оновіть сторінку (F5)

## Формати маркерів

### Формат 1 (рекомендований):
```html
<!--=== SectionName ===-->
<div>Контент</div>
<!--=== SectionName-end ===-->
```

### Формат 2 (альтернативний):
```html
<!--=== SectionName ===-->
<div>Контент</div>
<!--=== /SectionName ===-->
```

### Важливо:
- Пробіли навколо `===` ігноруються
- Регістр **НЕ** враховується
- Назва секції може містити `-`, `_`, цифри, але **БЕЗ пробілів**

## Відлагодження

### Якщо не працює:

1. **Перевірте консоль браузера (F12)**
   - Чи є логи `[TemplateItem] Filtered sections:`?
   - Чи змінюється розмір HTML?

2. **Перевірте формат маркерів**
   - Відкрийте View Code
   - Знайдіть `<!--=== SectionName ===-->`
   - Переконайтеся, що є закриваючий маркер

3. **Перевірте localStorage**
   ```javascript
   // Виконайте в консолі браузера:
   JSON.parse(localStorage.getItem('template-preview-config'))
   ```
   Має показати `hiddenSections: ['Promo-content', ...]`

4. **Примусове оновлення**
   - Закрийте всі діалоги
   - Оновіть сторінку (F5)
   - Відкрийте Template Library знову

## Приклади використання

### Приховати промо-контент:
```
Hidden Sections: Promo-content
```

### Приховати промо і футер:
```
Hidden Sections: Promo-content, Footer-social
```

### Приховати тестові блоки:
```
Hidden Sections: Test-section, Debug-info
```
